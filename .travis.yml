language: python
python:
- 3.6
install:
- pip install -r requirements.txt
services:
- postgresql
before_script:
- psql -c 'create database travistestdb;' -U postgres
- python manage.py migrate --settings=locallibrary.settings.test
script:
- coverage run --source=api manage.py test --settings=locallibrary.settings.test
- flake8 .
after_success:
- coveralls
notifications:
  matrix:
  - slack
  slack:
    secure: GbJcJZh4w32r8SMu9JB3FwyHBkWLS+cXMboXp+8Xfq8dMgQkmNkaEnurydxpdwi9cJED547ORRzwzTzrMjeD1dkxg4m7StdJTLR60EBdfFqMx8ROSAg0qVQjrY7/tf/eqKTIoB1Qx5GVKzpNLG8QqOZ1z3mqCSrRlacc6FFudQUOyfHvPuray5BISsdJl0VA6va4FahcRvu1tP1qY1Fz1GXXnPugDJ/lfitxo0xz5dobfKDux8r9HF97sR0LnGDIS7Jjt4ebm49yJbsD2XfMx7gkcfYTUGx24d/5INDBPjDpRPHblGss2f3KeSSmFg/POpoBSmuhz2JOgcikLHNnhrRVve3bFWLBa0hxwoIyiE8kpb/yobHlQRjnaLG67hihO56CMmCxiwB/X4T/lGgMhA6IwcNPDSjF/lOOKbxU0EjD9HJSXuCK+K9fxcJQr3JO/DfOr3pCYpu90OKFkv4Y3RW1xVAMsX2z1nvAUdZrhaGZOvgiQMXp4PUzKhQlVgDo6cGY/FncTqWEVwl2AdNgFAlsxBHyNGpBfFyA5TgFJJqHM2GvKRpFBLkxUSHfohS/MKWeFtbuK6qFGP02XVcPA70mcFkJW1LZSihcnMFHLdVDoPVaRq4R9i3VBQBH7q5DNxlCtum7WptuAOip318hFJCupBZvZ2XsUmcK+N7urdA=
deploy:
  provider: heroku
  api_key:
    secure: VuTCvM88wH6SxGO2dLKJHwm/7hm3z/k/z2j7/xko5OPYHGuO9i8G+1VJfgGTxEvnZW7qBBoIMveS2h2BguhZBPc9tfY1hcCd2iM51c6UQcGVFL/EEPNHKdCKrzhnOCUbw7ssggESu2lMdeR68NBysQ+h7pVdT9YMbyNZRo5AjqPDQlJBK66g8Jiywsamzy8hQRnoxwreNtbHP+RCqMcYcvJ3aWXUoNwVAPzRCGSy7osK5wWw3vywDX4FBFsJIg8trwlaqYl0NVb1JBP8o789sxJD+3L1i9ltsZWKOOZn3HBfGr43J1s3T76KmmoCtXgqOsVu3i+qKwCURPNJlhdP42gM6DTYtDwwMVLR68Qh8wPs9ZRQ5zR4qUxPUdWOm+f+EsbUWwmniY5GA8tZNyeB2DUq8AJQAVZaJY6R7NVHD4XUy8Ytf/4gKSO1z/JuaRmfQQ2fkHH6BEDqYwUNSPqoy0xdeISLTODlotiuaMHj908cXtd8rXMQK9VQ5LBSYlVZdkLAYWbfDF8vDRDvIDrw83nF7v/9jg+OLLZvojcT1AagapC7u+4++vAmL+EJ44aQiuSekkJuQPA9RDdkILFupg8yQLE0j5xtizKprmyetO2RXo0ZsCDKVjShvTg1VfV9/snQqifyV2NtZhwywLzPjSRNE6m/yAsJwCCGqPM4OvQ=
  app:
    main: moz-locallibrary
  run:
  - python manage.py migrate --noinput
